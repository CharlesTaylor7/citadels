<!-- prettier-ignore -->
{% extends "base.html" %} 
{% block head %}
<style>
  :root {
    --
  }
  #game-layout {
    display: grid;
    grid-template-areas:
      "roles actions actions resources"
      "roles city    city    players"
      "roles hand    hand    players";
  }

  #roles {
    grid-area: roles;
  }

  #log {
    grid-area: log;
  }

  #actions {
    grid-area: actions;
  }

  #resources {
    grid-area: resources;
  }

  #players {
    grid-area: players;
  }

  #city {
    grid-area: city;
  }

  #hand {
    grid-area: hand;
  }
</style>
{% endblock %}

<!-- prettier-ignore -->
{% block content %}
<main id="main" data-replace-url="/game">
  <div id="game-layout" class="h-screen gap-5">
    <div
      id="players"
      class="flex flex-col items-center rounded border border-neutral"
    >
      <h2 class="m-2 underline text-lg font-semibold">Players</h2>
      <div class="flex flex-col gap-2">
        {% for player in players %}
        <div
          class="flex flex-row justify-between items-center gap-2"
          id="{{ player.id }}"
        >
          {{ player.name }} {% if debug && player_id != player.id %}
          <form>
            <button
              class="btn btn-accent h-8 min-h-8 animate-none"
              hx-swap="morph"
              hx-target="#main"
              hx-post="/game/impersonate"
            >
              Impersonate
            </button>
            <input type="hidden" name="player_id" value="{{ player.id }}" />
          </form>
          {% endif %}
        </div>
        {% endfor %}
      </div>
    </div>

    <div
      id="actions"
      class="flex flex-col items-center rounded border border-neutral"
    >
      <h2 class="m-2 underline text-lg font-semibold">Actions</h2>
    </div>

    <div
      id="city"
      class="flex flex-col items-center rounded border border-neutral"
    >
      <h2 class="m-2 underline text-lg font-semibold">City</h2>
    </div>

    <div
      id="roles"
      class="flex flex-col items-center rounded border border-neutral"
    >
      <h2 class="m-2 underline text-lg font-semibold">Roles</h2>

      <div class="flex flex-col gap-2">
        <div class="italic text-sm">Hover over a role for details</div>
        {% for card in characters %}
        <div
          class="text-left tooltip tooltip-right cursor-pointer"
          data-tip="{{ card.description }}"
        >
          {{ card.rank }}. {{ card.name }}
        </div>
        {% endfor %}
      </div>
    </div>

    <div
      id="resources"
      class="flex flex-col items-center rounded border border-neutral"
    >
      <h2 class="m-2 underline text-lg font-semibold">Resources</h2>
    </div>

    <div
      id="hand"
      class="flex flex-col items-start rounded border border-neutral"
    >
      <h2 class="m-2 underline m-2 text-lg font-semibold w-full text-center">
        Hand
      </h2>
      <div class="flex flex-row flex-wrap gap-2">
        {% for card in roles %} {% include "role.html" %} {% endfor %} {% for
        card in hand %} {% include "district.html" %} {% endfor %}
      </div>
    </div>
  </div>
</main>
{% endblock %}
