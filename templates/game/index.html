{% extends "base.html" %} 
{% block content %}
<main 
  id="page-root" 
  data-replace-url="/game" 
  data-theme="retro"
  class="
    h-screen
    flex flex-row
  "
>
  <div
    id="left-panel"
    class="flex flex-col"
  >
    <div
      id="roles"
      class="min-w-72 p-2 bg-neutral-content flex flex-col items-center border border-base-200"
    >
      <h2 class="m-2 underline text-lg font-semibold">Roles</h2>

      <div class="flex flex-col gap-2">
        <div class="italic text-sm">Hover over a role for details</div>
        {% for role in characters %}
          <div
            data-tip="{{ role.description }}"
            class="
              cursor-pointer
              text-left 
              tooltip tooltip-right tooltip-secondary
            "
          >
            {{ role.rank }}. {{ role.name }}
          </div>
        {% endfor %}
      </div>
    </div>
    {% include "logs.html" %}
  </div>
  <form
    id="center-panel"
    class="grow flex flex-col"
  >
    {% include "city.html" %}
    {% include "hand.html" %}
    {% include "menu.html" %}
  </form>
  <div
    id="right-panel"
    class="flex flex-col"
  >
    <div
      id="players"
      class="p-4 bg-neutral-content border border-base-200 flex flex-col items-center gap-2"
      hx-trigger="mouseleave"
      hx-get="/game/city/{{ my.name }}"
      hx-target="#city"
      hx-swap="outerHTML"
    >
      <h2 class="m-2 underline text-lg font-semibold">Players</h2>
      <div class="italic text-sm">Hover to see more details</div>
      <div class="flex flex-col gap-2">
        {% for player in players %}
        {% include "player-summary.html" %}
        {% endfor %}
      </div>
    </div>
    <div
      id="misc"
      class="grow px-4 bg-neutral-content border border-base-200 flex flex-col items-center gap-2 text-base"
    >
      <h2 class="m-2 underline text-lg font-semibold">Info</h2>
      <div class="flex flex-row justify-center gap-3" >
        <div class="flex flex-col" >
          <div>
            Round: 
          </div>
          <div>
            Deck: 
          </div>
          {% if misc.timer.is_some() %}
          <div>
            Timer: 
          </div>
          {% endif %}
        </div>
        <div class="flex flex-col">
          <div>
            {{ misc.round }}
          </div>
          <div>
            {{ misc.deck }}
          </div>
          {% match misc.timer %}
          {% when Some with (timer) %}
            <div>
              {{ timer }}
            </div>
          {% else %}
          {% endmatch %}
        </div>
      </div>
    </div>
</main>
{% endblock %}
