<!-- prettier-ignore -->
{% extends "base.html" %} 
{% block head %}
<style>
  #game-layout {
    display: grid;
    grid-template-areas:
      "roles actions actions resources"
      "roles city    city    players"
      "roles hand    hand    players";
  }

  #roles {
    grid-area: roles;
  }

  #log {
    grid-area: log;
  }

  #actions {
    grid-area: actions;
  }

  #resources {
    grid-area: resources;
  }

  #players {
    grid-area: players;
  }

  #city {
    grid-area: city;
  }

  #hand {
    grid-area: hand;
  }
</style>
{% endblock %}

<!-- prettier-ignore -->
{% block content %}
<main id="main" data-replace-url="/game">
  <div id="game-layout" class="h-screen gap-5">
    <div
      id="players"
      class="p-7 flex flex-col items-center rounded border border-slate-500"
    >
      <h2 class="underline text-xl font-semibold">Players</h2>
      <ul class="list-disc">
        {% for player in players %}
        <li id="{{ player.id }}">
          {{ player.name }} {% if debug %}
          <button
            class="border rounded px-2 bg-blue-400"
            hx-swap="morph"
            hx-target="#main"
            hx-get="/game/{{ player.name }}"
            hx-push-url="true"
          >
            Impersonate
          </button>

          {% endif %}
        </li>
        {% endfor %}
      </ul>
    </div>

    <div
      id="hand"
      class="p-7 flex flex-col items-center rounded border border-slate-500"
    >
      <h2 class="underline text-xl font-semibold">Hand</h2>
      {% for card in hand %}
      <div class="rounded">
        <div>{{ card.display_name }}</div>

        {% match card.description %} {% when Some with (d) %}
        <div>{{ d }}</div>
        {% when None %} {% endmatch %}
      </div>
      {% endfor %}
    </div>

    <div
      id="actions"
      class="p-7 flex flex-col items-center rounded border border-slate-500"
    >
      <h2 class="underline text-xl font-semibold">Actions</h2>
    </div>

    <div
      id="city"
      class="p-7 flex flex-col items-center rounded border border-slate-500"
    >
      <h2 class="underline text-xl font-semibold">City</h2>
    </div>

    <div
      id="roles"
      class="p-7 flex flex-col items-center rounded border border-slate-500"
    >
      <h2 class="underline text-xl font-semibold">Roles</h2>
    </div>

    <div
      id="resources"
      class="p-7 flex flex-col items-center rounded border border-slate-500"
    >
      <h2 class="underline text-xl font-semibold">Resources</h2>
    </div>
  </div>
</main>
{% endblock %}
